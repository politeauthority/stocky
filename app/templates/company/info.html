{% extends "layout.html" %}
{%block title%}{{company.symbol}} | Stocky{%endblock%}
{% block javascript%}
    <script src="/static/vendor/flot/excanvas.min.js"></script>
    <script src="/static/vendor/flot/jquery.flot.js"></script>
    <script src="/static/vendor/flot/jquery.flot.resize.js"></script>
    <script src="/static/vendor/flot/jquery.flot.time.js"></script>
    <script src="/static/vendor/flot/jquery.flot.symbol.js"></script>
    <!-- <script src="/static/vendor/flot/jquery.flot.axislabels.js"></script> -->
    <script src="/static/vendor/flot-tooltip/jquery.flot.tooltip.min.js"></script>
    <!-- <script src="/static/data/flot-data.js"></script> -->

    <script type=text/javascript>
        var filters = [{"name": "id", "op": "eq", "val": "{{company.id}}"}];
        d = $.ajax({
          url: 'http://localhost/api/quotes',
          data: {"q": JSON.stringify({"filters": filters})},
          dataType: "json",
          contentType: "application/json",
          success: function(data) { console.log(data.objects); }
        });
        console.log(d);
        console.log(d[0]);

    </script>
{%endblock%}

{% block content %}

<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-8">
            <h1 class="page-header">{{company.name}}</h1>
        </div>
        <!-- /.col-lg-8-->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-4 col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-dollar fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">{{company.price|fmt_currency}}</div>
                            <div>Current Price</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-building fa-fw"></i>Stats
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="list-group">
                                {%if high_52_week%}
                                    <a href="#" class="list-group-item">
                                        <i class="fa  fa-arrow-circle-up fa-fw"></i> 52 Week High
                                        <span class="pull-right text-muted"><strong>${{high_52_week}}</strong></span>
                                    </a>
                                {%endif%}
                                {%if low_52_week%}
                                    <a href="#" class="list-group-item">
                                        <i class="fa  fa-arrow-circle-down fa-fw"></i> 52 Week Low
                                        <span class="pull-right text-muted"><strong>${{low_52_week}}</strong></span>
                                    </a>
                                {%endif%}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-building fa-fw"></i>Base Info
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="list-group">
                                {%if company.sector%}
                                    <a href="#" class="list-group-item">
                                        <i class="fa fa-building-o fa-fw"></i> Sector
                                        <span class="pull-right text-muted"><strong>{{company.sector}}</strong></span>
                                    </a>
                                {%endif%}
                                {%if company.industry%}
                                    <a href="#" class="list-group-item">
                                        <i class="fa fa-building-o fa-fw"></i> Industry
                                        <span class="pull-right text-muted">
                                            <strong>{{company.industry}}</strong>
                                        </span>
                                    </a>
                                {%endif%}
                                {%if company.exchange %}
                                    <a href="#" class="list-group-item">
                                        <i class="fa fa-building-o fa-fw"></i> Exchange
                                        <span class="pull-right text-muted">
                                            <strong>{{company.exchange}}</strong>
                                        </span>
                                    </a>
                                {%endif%}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /.row -->

    <div class="row">
        <div class="col-lg-8">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> 52 Week Chart
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                Actions
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li><a href="#">Action</a>
                                </li>
                                <li><a href="#">Another action</a>
                                </li>
                                <li><a href="#">Something else here</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="flot-chart">
                        <div style="width:100%;height:100%" class="flot-chart-content" id="flot-line-chart-multi"></div>
                    </div>
                    http://localhost/api/quotes?name=company_id&val={{company.id}}
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-8 -->
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bell fa-fw"></i> Admin Stats
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="list-group">
                        <a href="#" class="list-group-item">
                            <i class="fa fa-building-o fa-fw"></i> Company ID
                            <span class="pull-right text-muted"><strong>{{company.id}}</strong></span>
                        </a>
                        <a href="#" class="list-group-item">
                            <i class="fa fa-comment fa-fw"></i> Quotes
                            <span class="pull-right text-muted"><strong>{{quotes|length}}</strong></span>

                        </a>
                        <a href="#" class="list-group-item">
                            <i class="fa fa-comment fa-fw"></i> Last updated
                            <span class="pull-right text-muted"><strong>{{company.ts_updated}}</strong></span>

                        </a>

                    </div>
                    <!-- /.list-group -->
                    <a href="#" class="btn btn-default btn-block">View All Alerts</a>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> Donut Chart Example
                </div>
                <div class="panel-body">
                    <div id="morris-donut-chart"></div>
                    <a href="#" class="btn btn-default btn-block">View Details</a>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-4 -->
    </div>
    <!-- /.row -->

    <div class="row">
        <div class="col-lg-8">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> Company Meta
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                Actions
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li><a href="#">Action</a>
                                </li>
                                <li><a href="#">Another action</a>
                                </li>
                                <li><a href="#">Something else here</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    {{company.meta}}
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-8 -->
    </div>
    <!-- /.row -->

</div>


{% endblock %}
